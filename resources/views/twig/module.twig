{% extends "layouts/app.twig" %}

{% block title %}
    {{ structure.title }}
{% endblock %}

{% block top_content %}
    <!-- Widget in alto -->
    {( "name": "widgets", "id_module": "{{ module_id }}", "id_record": "{{ record_id }}", "position": "top", "place": "controller" )}
{% endblock %}

{% block bottom_content %}
    <!-- Widget in alto -->
    {( "name": "widgets", "id_module": "{{ module_id }}", "id_record": "{{ record_id }}", "position": "right", "place": "controller" )}
{% endblock %}

{% block content %}
    {{ block('top_content') }}

    <div class="content-header">
        <a class="h2" data-toggle="tab" href="#tab_0" style="color: inherit; text-decoration: inherit;">
            {% if structure.help %}
            <span class="tip" title="{{ structure.help }}" data-position="bottom">
                {% endif %}

                    <i class="{{ structure.icon }}"></i> {{ structure.title }}

                {% if structure.help %}
                    <i class="fa fa-question-circle-o" style="font-size:0.75em"></i>
                </span>
            {% endif %}

            {% if structure.hasAddFile() and structure.permission == 'rw' %}
                <!-- Pulsante "Aggiungi" solo se la struttura lo supporta -->
                <button type="button" class="btn btn-primary" data-toggle="modal" data-title="{{ 'Aggiungi'|trans }}..." data-href="{{ url_for('module-add', {'module_id': module_id, 'reference_id': reference_id}) }}">
                    <i class="fa fa-plus"></i>
                </button>
            {% endif %}
        </a>

        <ul class="nav nav-tabs float-right" id="tabs" role="tablist">
            {% block plugins_list %}{% endblock %}

            {% if include_operations and user.isAdmin() %}
                <li class="nav-item float-right bg-warning">
                    <a class="nav-link" data-toggle="tab" href="#tab_info" id="link-tab_info">{{ 'Info'|trans }}</a>
                </li>
            {% endif %}
        </ul>
    </div>

    <div class="tab-content">
        <div id="tab_0" class="tab-pane active">

            {% block module_content %}{% endblock %}

        </div>

        {% if include_operations and user.isAdmin() %}
            <div id="tab_info" class="tab-pane">
                {% include 'operations.twig' with {operations: operations} %}
            </div>
        {% endif %}

        {% block plugins_content %}{% endblock %}
    </div>

    {{ block('bottom_content') }}
{% endblock %}
